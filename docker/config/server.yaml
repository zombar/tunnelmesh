# TunnelMesh Server Configuration for Docker testing
listen: ":8080"
auth_token: "docker-test-token-123"
locations: true  # Enable node location tracking (uses ip-api.com)
log_level: "info"

# S3 storage (enables user/group management, file shares)
s3:
  enabled: true
  data_dir: "/var/lib/tunnelmesh/s3"
  max_size: "10Gi"  # Storage quota (required)

admin:
  enabled: true
  # Admin accessible at https://server-node.tunnelmesh/ from mesh peers
  monitoring:
    prometheus_url: "http://localhost:9090"
    grafana_url: "http://localhost:3000"

# WireGuard client management (enables admin panel WireGuard section)
# wireguard:
#   enabled: true
#   endpoint: "your-public-ip:51820"  # Set to concentrator's public endpoint

# Server joins the mesh as a peer (enables exit node functionality)
join_mesh:
  name: "server-node"
  private_key: "/root/.tunnelmesh/id_ed25519"
  allow_exit_traffic: true
  dns:
    enabled: true
    listen: "127.0.0.53:53"
    aliases:
      - "alt.server-node"
  loki:
    enabled: true
    url: "http://localhost:3100"  # Loki runs in same network namespace
    batch_size: 100
    flush_interval: "5s"
