# TunnelMesh Server Configuration for Docker testing
listen: ":8080"
auth_token: "docker-test-token-123"
mesh_cidr: "10.99.0.0/16"
domain_suffix: ".tunnelmesh"
locations: true  # Enable node location tracking (uses ip-api.com)
log_level: "info"

admin:
  enabled: true
  bind_address: "0.0.0.0"    # External access at http://localhost:8880/admin/
  mesh_only_admin: false     # Use HTTP externally instead of HTTPS on mesh
  monitoring:
    prometheus_url: "http://localhost:9090"
    grafana_url: "http://localhost:3000"

# WireGuard client management (enables admin panel WireGuard section)
# wireguard:
#   enabled: true
#   endpoint: "your-public-ip:51820"  # Set to concentrator's public endpoint

# Server joins the mesh as a peer (enables exit node functionality)
join_mesh:
  name: "server-node"
  private_key: "/root/.tunnelmesh/id_ed25519"
  allow_exit_traffic: true
  dns:
    enabled: true
    listen: "127.0.0.53:53"
    aliases:
      - "alt.server-node"
  loki:
    enabled: true
    url: "http://localhost:3100"  # Loki runs in same network namespace
    batch_size: 100
    flush_interval: "5s"
