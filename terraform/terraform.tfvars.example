# TunnelMesh Terraform Configuration
#
# Copy this file to terraform.tfvars and customize for your deployment.

# ============================================================================
# REQUIRED
# ============================================================================

# DigitalOcean API Token - set via environment variable:
#   export TF_VAR_do_token="dop_v1_xxx"
# Get yours at: https://cloud.digitalocean.com/account/api/tokens

# Your domain name (must be managed in DigitalOcean DNS)
domain = "example.com"

# Authentication token for mesh peers
# Generate with: openssl rand -hex 32
auth_token = ""

# ============================================================================
# NODE DEFINITIONS
# ============================================================================
# Define your mesh infrastructure below. Each node is a key in the map.
#
# Per-node options:
#   coordinator = true/false  # Run coordination server (max 1)
#   peer        = true/false  # Run as mesh peer
#   wireguard   = true/false  # Enable WireGuard concentrator
#   region      = "ams3"      # Override default region
#   size        = "s-1vcpu-1gb"  # Override droplet size
#   wg_port     = 51820       # Override WireGuard port
#   ssh_port    = 2222        # Override SSH tunnel port
#   tags        = ["custom"]  # Additional tags

# --- Example 1: All-in-One (recommended for getting started) ---
# Single $4/month droplet with everything
nodes = {
  "tunnelmesh" = {
    coordinator = true
    peer        = true
    wireguard   = true
  }
}

# --- Example 2: Coordinator + Separate WireGuard Peer ---
# nodes = {
#   "tunnelmesh" = {
#     coordinator = true
#   }
#   "tm-wg" = {
#     peer      = true
#     wireguard = true
#   }
# }

# --- Example 3: Multi-Region Deployment ---
# Coordinator in Amsterdam, WireGuard peers in multiple regions
# nodes = {
#   "tunnelmesh" = {
#     coordinator = true
#     peer        = true
#     wireguard   = true
#     region      = "ams3"
#   }
#   "tm-us" = {
#     peer      = true
#     wireguard = true
#     region    = "nyc3"
#   }
#   "tm-asia" = {
#     peer      = true
#     wireguard = true
#     region    = "sgp1"
#   }
# }

# --- Example 4: High Availability Setup ---
# Larger coordinator, multiple WireGuard entry points
# nodes = {
#   "tunnelmesh" = {
#     coordinator = true
#     peer        = true
#     size        = "s-1vcpu-2gb"
#     region      = "ams3"
#   }
#   "tm-wg-eu" = {
#     peer      = true
#     wireguard = true
#     region    = "fra1"
#   }
#   "tm-wg-us" = {
#     peer      = true
#     wireguard = true
#     region    = "sfo3"
#   }
#   "tm-exit-asia" = {
#     peer   = true
#     region = "sgp1"
#     tags   = ["exit-node"]
#   }
# }

# --- Example 5: Peers Only (external coordinator) ---
# For connecting to an existing coordinator
# external_coordinator_url = "https://tunnelmesh.example.com"
# nodes = {
#   "tm-office" = {
#     peer      = true
#     wireguard = true
#   }
#   "tm-datacenter" = {
#     peer = true
#   }
# }

# ============================================================================
# DEFAULT SETTINGS
# ============================================================================
# These can be overridden per-node in the nodes map above

# DigitalOcean region (nyc1, nyc3, sfo2, sfo3, ams3, sgp1, lon1, fra1, tor1, blr1, syd1)
# default_region = "ams3"

# Droplet size
# default_droplet_size = "s-1vcpu-512mb-10gb"  # $4/mo

# WireGuard UDP port
# default_wg_port = 51820

# SSH tunnel port for mesh connections
# default_ssh_port = 2222

# ============================================================================
# GLOBAL SETTINGS
# ============================================================================

# SSH key name (from your DigitalOcean account) for droplet access
# ssh_key_name = "my-ssh-key"

# Email for Let's Encrypt SSL certificate notifications
# ssl_email = "admin@example.com"

# Mesh network CIDR
# mesh_cidr = "10.99.0.0/16"

# Domain suffix for mesh hostnames
# domain_suffix = ".tunnelmesh"

# GitHub owner for binary downloads
# github_owner = "zombar"

# TunnelMesh version
# binary_version = "latest"
